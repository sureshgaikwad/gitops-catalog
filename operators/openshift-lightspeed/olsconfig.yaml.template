apiVersion: ols.openshift.io/v1alpha1
kind: OLSConfig
metadata:
  name: cluster
  namespace: openshift-lightspeed
  annotations:
    argocd.argoproj.io/sync-wave: "3"
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
spec:
  llm:
    providers:
      - name: red_hat_openshift_ai
        type: rhoai_vllm
        url: "{{DYNAMIC_MODEL_URL}}"
        credentialsSecretRef:
          name: rhoai-api-keys
        models:
          - name: mistral-small-24b-instruct-quantized
            url: "{{DYNAMIC_MODEL_URL}}"
        headers:
          Authorization: "Bearer {{.secret.rhoai-api-keys.default-api-key}}"
          Content-Type: "application/json"
  ols:
    defaultProvider: red_hat_openshift_ai
    defaultModel: mistral-small-24b-instruct-quantized
    conversationCache:
      type: memory
      memory:
        maxEntries: 1000
    logging:
      level: INFO
    authentication:
      autoDiscoverProviders: true
      preferredProvider: "authorino"
