apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: vllm-mistral-auth
  namespace: models
  annotations:
    argocd.argoproj.io/sync-wave: "2"
  labels:
    app: vllm-mistral-7b
    component: routing
spec:
  hosts:
  - vllm-mistral-7b.models.svc.cluster.local
  http:
  - match:
    - uri:
        prefix: /v1/
    - uri:
        prefix: /health
    route:
    - destination:
        host: vllm-mistral-7b.models.svc.cluster.local
        port:
          number: 8000
    timeout: 300s
